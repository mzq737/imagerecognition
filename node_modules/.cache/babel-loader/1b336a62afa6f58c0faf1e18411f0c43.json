{"ast":null,"code":"var _jsxFileName = \"/Users/zqm/JavaScriptProjects/imagerecognition/src/App.js\";\nimport React, { useState } from 'react';\nimport Particles from 'react-particles-js';\nimport Clarifai from 'clarifai';\nimport Navigation from './components/Navigation/Navigation';\nimport Logo from './components/Logo/Logo';\nimport Rank from './components/Rank/Rank';\nimport ImageLinkForm from './components/ImageLinkForm/ImageLinkForm';\nimport FaceRecognition from './components/FaceRecognition/FaceRecognition';\nimport './App.css';\nconst app = new Clarifai.App({\n  apiKey: '8683bad9ae8f4570b69a33c9ef143df0'\n});\nconst parameters = {\n  \"particles\": {\n    \"number\": {\n      \"value\": 100\n    },\n    \"size\": {\n      \"value\": 3\n    }\n  },\n  \"interactivity\": {\n    \"events\": {\n      \"onhover\": {\n        \"enable\": true,\n        \"mode\": \"repulse\"\n      }\n    }\n  }\n};\n\nconst App = () => {\n  const [input, setInput] = useState('');\n  const [imageUrl, setImageUrl] = useState('');\n  const [box, setBox] = useState({});\n\n  const onInputChange = event => {\n    this.setState({\n      input: event.target.value\n    });\n  }; // calculateFaceLocation = (data) => {\n  //   const face = data.outputs[0].data.regions[0].region_info.bounding_box;\n  //   const image = document.getElementById('inputimage');\n  //   const width = Number(image.width);\n  //   const height = Number(image.height);\n  //   return {\n  //     leftCol: face.left_col * width,\n  //     topRow: face.top_row * height,\n  //     rightCol: width - (face.right_col * width),\n  //     bottomRow: height - (face.bottom_row * height),\n  //     face: 'face',\n  //     num: '1.00'\n  //   }\n  // }\n\n\n  const calculateFaceLocation = data => {\n    const regions = data.outputs[0].data.regions;\n    const faces = regions.map(region => region.region_info.bounding_box);\n    const image = document.getElementById('inputimage');\n    const width = Number(image.width);\n    const height = Number(image.height);\n    return faces.map(face => {\n      return {\n        leftCol: face.left_col * width,\n        topRow: face.top_row * height,\n        rightCol: width - face.right_col * width,\n        bottomRow: height - face.bottom_row * height,\n        face: 'face',\n        num: '1.00'\n      };\n    });\n  };\n\n  const displayFaceBox = box => {\n    console.log(box);\n    setBox(box);\n  }; // onButtonSubmit = () => {\n  //   this.setState({imageUrl: this.state.input})\n  //   app.models\n  //     .predict(\n  //       \"a403429f2ddf4b49b307e318f00e528b\", \n  //       this.state.input)\n  //     .then(response => this.displayFaceBox(this.calculateFaceLocation(response)))\n  //     .catch(err => console.log(err));\n  // }\n\n\n  const onButtonSubmit = () => {\n    setImageUrl(input);\n    app.models.predict(\"a403429f2ddf4b49b307e318f00e528b\", this.state.input).then(response => {\n      console.log(this.calculateFaceLocation(response));\n    }).catch(err => console.log(err));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Particles, {\n    className: \"particles\",\n    params: parameters,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Navigation, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Logo, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Rank, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ImageLinkForm, {\n    onInputChange: onInputChange,\n    onButtonSubmit: onButtonSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(FaceRecognition, {\n    imageUrl: imageUrl,\n    box: this.state.box,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/zqm/JavaScriptProjects/imagerecognition/src/App.js"],"names":["React","useState","Particles","Clarifai","Navigation","Logo","Rank","ImageLinkForm","FaceRecognition","app","App","apiKey","parameters","input","setInput","imageUrl","setImageUrl","box","setBox","onInputChange","event","setState","target","value","calculateFaceLocation","data","regions","outputs","faces","map","region","region_info","bounding_box","image","document","getElementById","width","Number","height","face","leftCol","left_col","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","num","displayFaceBox","console","log","onButtonSubmit","models","predict","state","then","response","catch","err"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Particles from 'react-particles-js';\nimport Clarifai from 'clarifai';\nimport Navigation from './components/Navigation/Navigation';\nimport Logo from './components/Logo/Logo';\nimport Rank from './components/Rank/Rank';\nimport ImageLinkForm from './components/ImageLinkForm/ImageLinkForm';\nimport FaceRecognition from'./components/FaceRecognition/FaceRecognition';\nimport './App.css';\n\nconst app = new Clarifai.App({\n  apiKey: '8683bad9ae8f4570b69a33c9ef143df0'\n });\n\nconst parameters = {\n  \"particles\": {\n      \"number\": {\n          \"value\": 100\n      },\n      \"size\": {\n          \"value\": 3\n      }\n  },\n  \"interactivity\": {\n      \"events\": {\n          \"onhover\": {\n              \"enable\": true,\n              \"mode\": \"repulse\"\n          }\n      }\n  }\n}\n\nconst App = () => {\n  const [ input, setInput ] = useState('')\n  const [ imageUrl, setImageUrl ] = useState('')\n  const [ box, setBox ] = useState({})\n\n  const onInputChange = (event) => {\n    this.setState({input: event.target.value})\n  } \n\n  // calculateFaceLocation = (data) => {\n  //   const face = data.outputs[0].data.regions[0].region_info.bounding_box;\n  //   const image = document.getElementById('inputimage');\n  //   const width = Number(image.width);\n  //   const height = Number(image.height);\n  //   return {\n  //     leftCol: face.left_col * width,\n  //     topRow: face.top_row * height,\n  //     rightCol: width - (face.right_col * width),\n  //     bottomRow: height - (face.bottom_row * height),\n  //     face: 'face',\n  //     num: '1.00'\n  //   }\n  // }\n\n  const calculateFaceLocation = (data) => {\n    const regions = data.outputs[0].data.regions\n    const faces = regions.map(region => region.region_info.bounding_box);\n    const image = document.getElementById('inputimage');\n    const width = Number(image.width);\n    const height = Number(image.height);\n    return (\n      faces.map(face => {\n        return {\n          leftCol: face.left_col * width,\n          topRow: face.top_row * height,\n          rightCol: width - (face.right_col * width),\n          bottomRow: height - (face.bottom_row * height),\n          face: 'face',\n          num: '1.00'\n        }\n      })\n    )\n  }\n\n\n  const displayFaceBox = (box) => {\n    console.log(box);\n    setBox(box);   \n  }\n\n  // onButtonSubmit = () => {\n  //   this.setState({imageUrl: this.state.input})\n  //   app.models\n  //     .predict(\n  //       \"a403429f2ddf4b49b307e318f00e528b\", \n  //       this.state.input)\n  //     .then(response => this.displayFaceBox(this.calculateFaceLocation(response)))\n  //     .catch(err => console.log(err));\n  // }\n\n  const onButtonSubmit = () => {\n    setImageUrl(input);\n    app.models\n      .predict(\n        \"a403429f2ddf4b49b307e318f00e528b\", \n        this.state.input)\n      .then(response => {console.log(this.calculateFaceLocation(response))})\n      .catch(err => console.log(err));\n  }\n\n  \n  return (\n    <div className=\"App\">\n      <Particles className='particles' \n        params = {parameters}\n      />\n      <Navigation />\n      <Logo />\n      <Rank />\n      <ImageLinkForm \n        onInputChange={onInputChange} \n        onButtonSubmit={onButtonSubmit}\n      />\n      <FaceRecognition imageUrl={imageUrl} box={this.state.box} />\n    </div>\n  )\n  \n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}