{"ast":null,"code":"var _jsxFileName = \"/Users/zqm/JavaScriptProjects/imagerecognition/src/App.js\";\nimport React, { Component } from 'react';\nimport Particles from 'react-particles-js';\nimport Clarifai from 'clarifai';\nimport Navigation from './components/Navigation/Navigation';\nimport Signin from './components/Signin/Signin';\nimport SignUp from './components/SignUp/SignUp';\nimport Logo from './components/Logo/Logo';\nimport Rank from './components/Rank/Rank';\nimport ImageLinkForm from './components/ImageLinkForm/ImageLinkForm';\nimport FaceRecognition from './components/FaceRecognition/FaceRecognition';\nimport './App.css';\nconst app = new Clarifai.App({\n  apiKey: '8683bad9ae8f4570b69a33c9ef143df0'\n});\nconst parameters = {\n  \"particles\": {\n    \"number\": {\n      \"value\": 100\n    },\n    \"size\": {\n      \"value\": 3\n    }\n  },\n  \"interactivity\": {\n    \"events\": {\n      \"onhover\": {\n        \"enable\": true,\n        \"mode\": \"repulse\"\n      }\n    }\n  }\n};\n\nclass App extends Component {\n  constructor() {\n    super();\n\n    this.loadUser = data => {\n      this.setState({\n        user: {\n          id: data.id,\n          name: data.name,\n          email: data.email,\n          entries: data.entries,\n          joined: data.joined\n        }\n      });\n    };\n\n    this.onInputChange = event => {\n      this.setState({\n        input: event.target.value\n      });\n    };\n\n    this.calculateFaceLocation = data => {\n      const face = data.outputs[0].data.regions[0].region_info.bounding_box;\n      const image = document.getElementById('inputimage');\n      const width = Number(image.width);\n      const height = Number(image.height);\n      return {\n        leftCol: face.left_col * width,\n        topRow: face.top_row * height,\n        rightCol: width - face.right_col * width,\n        bottomRow: height - face.bottom_row * height,\n        face: 'face',\n        num: '1.00'\n      };\n    };\n\n    this.displayFaceBox = box => {\n      this.setState({\n        box: box\n      });\n    };\n\n    this.onButtonSubmit = () => {\n      this.setState({\n        imageUrl: this.state.input\n      });\n      app.models.predict(\"a403429f2ddf4b49b307e318f00e528b\", this.state.input).then(response => this.displayFaceBox(this.calculateFaceLocation(response))).catch(err => console.log(err));\n    };\n\n    this.onRouteChange = route => {\n      if (route === 'signin') {\n        this.setState({\n          isSignedIn: false\n        });\n      } else if (route === 'home') {\n        this.setState({\n          isSignedIn: true\n        });\n      }\n\n      this.setState({\n        route: route\n      });\n    };\n\n    this.state = {\n      input: '',\n      imageUrl: '',\n      box: {},\n      route: 'signin',\n      isSignedIn: false,\n      user: {\n        id: '',\n        name: '',\n        email: '',\n        entries: 0,\n        joined: ''\n      }\n    };\n  }\n\n  render() {\n    const {\n      isSignedIn,\n      imageUrl,\n      route,\n      box\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Particles, {\n      className: \"particles\",\n      params: parameters,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Navigation, {\n      isSignedIn: isSignedIn,\n      onRouteChange: this.onRouteChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }\n    }), this.state.route === 'home' ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Logo, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Rank, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(ImageLinkForm, {\n      onInputChange: this.onInputChange,\n      onButtonSubmit: this.onButtonSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(FaceRecognition, {\n      imageUrl: imageUrl,\n      box: box,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 15\n      }\n    })) : route === 'signin' ? /*#__PURE__*/React.createElement(Signin, {\n      onRouteChange: this.onRouteChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 15\n      }\n    }) : /*#__PURE__*/React.createElement(SignUp, {\n      loadUser: l,\n      onRouteChange: this.onRouteChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 15\n      }\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/zqm/JavaScriptProjects/imagerecognition/src/App.js"],"names":["React","Component","Particles","Clarifai","Navigation","Signin","SignUp","Logo","Rank","ImageLinkForm","FaceRecognition","app","App","apiKey","parameters","constructor","loadUser","data","setState","user","id","name","email","entries","joined","onInputChange","event","input","target","value","calculateFaceLocation","face","outputs","regions","region_info","bounding_box","image","document","getElementById","width","Number","height","leftCol","left_col","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","num","displayFaceBox","box","onButtonSubmit","imageUrl","state","models","predict","then","response","catch","err","console","log","onRouteChange","route","isSignedIn","render","l"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Particles from 'react-particles-js';\nimport Clarifai from 'clarifai';\nimport Navigation from './components/Navigation/Navigation';\nimport Signin from './components/Signin/Signin';\nimport SignUp from './components/SignUp/SignUp';\nimport Logo from './components/Logo/Logo';\nimport Rank from './components/Rank/Rank';\nimport ImageLinkForm from './components/ImageLinkForm/ImageLinkForm';\nimport FaceRecognition from'./components/FaceRecognition/FaceRecognition';\nimport './App.css';\n\nconst app = new Clarifai.App({\n  apiKey: '8683bad9ae8f4570b69a33c9ef143df0'\n });\n\nconst parameters = {\n  \"particles\": {\n      \"number\": {\n          \"value\": 100\n      },\n      \"size\": {\n          \"value\": 3\n      }\n  },\n  \"interactivity\": {\n      \"events\": {\n          \"onhover\": {\n              \"enable\": true,\n              \"mode\": \"repulse\"\n          }\n      }\n  }\n}\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state={\n      input: '',\n      imageUrl: '',\n      box: {},\n      route: 'signin',\n      isSignedIn: false,\n      user: {\n        id: '',\n        name: '',\n        email: '',\n        entries: 0,\n        joined: ''\n      }\n\n    }\n  }\n\n  loadUser = (data) => {\n    this.setState({user: {\n      id: data.id,\n      name: data.name,\n      email: data.email,\n      entries: data.entries,\n      joined: data.joined\n    }})\n  }\n\n  onInputChange = (event) => {\n    this.setState({input: event.target.value});\n  } \n\n  calculateFaceLocation = (data) => {\n    const face = data.outputs[0].data.regions[0].region_info.bounding_box;\n    const image = document.getElementById('inputimage');\n    const width = Number(image.width);\n    const height = Number(image.height);\n    return {\n      leftCol: face.left_col * width,\n      topRow: face.top_row * height,\n      rightCol: width - (face.right_col * width),\n      bottomRow: height - (face.bottom_row * height),\n      face: 'face',\n      num: '1.00'\n    }\n  }\n\n  displayFaceBox = (box) => {\n    this.setState({box: box});\n  }\n\n  onButtonSubmit = () => {\n    this.setState({imageUrl: this.state.input})\n    app.models\n      .predict(\n        \"a403429f2ddf4b49b307e318f00e528b\", \n        this.state.input)\n      .then(response => this.displayFaceBox(this.calculateFaceLocation(response)))\n      .catch(err => console.log(err));\n  }\n  \n  onRouteChange = (route) => {\n    if (route === 'signin') {\n      this.setState({isSignedIn: false});\n    } else if (route === 'home') {\n      this.setState({isSignedIn: true})\n    }\n    this.setState({route: route});\n  }\n\n  render() {\n    const { isSignedIn, imageUrl, route, box } = this.state;\n    return (\n      <div className=\"App\">\n        <Particles className='particles' \n          params = {parameters}\n        />\n        <Navigation isSignedIn={isSignedIn} onRouteChange={this.onRouteChange}/>\n          {this.state.route === 'home'\n          ? <div>\n              <Logo />\n              <Rank />\n              <ImageLinkForm \n                onInputChange={this.onInputChange} \n                onButtonSubmit={this.onButtonSubmit}\n              />\n              <FaceRecognition imageUrl={imageUrl} box={box} />\n            </div>\n          : (\n            route === 'signin' \n            ? <Signin onRouteChange={this.onRouteChange} />\n            : <SignUp loadUser={l} onRouteChange={this.onRouteChange} />\n          )\n        }\n      </div>\n    )\n  }  \n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}